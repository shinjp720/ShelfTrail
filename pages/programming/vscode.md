---
title: VSCode
layout: default
---

# VSCode <a id="top" data-name="TOP"></a>

- Microsoftが開発しているWindows、Linux、macOS、Web用のソースコードエディタで、フリーで高機能な人気のエディタ。

---

## ショートカット <a id="short-cuts" data-name="ショートカット"></a>

<table>
    <caption>基本</caption>
        <tr><th>ショートカットキー</th><th>意味</th></tr>
        <tr><td>Ctrl+S</td><td>保存</td></tr>
        <tr><td>Ctrl+C</td><td>コピー(範囲選択時)</td></tr>
        <tr><td>Ctrl+X</td><td>切り取り(範囲選択時)</td></tr>
        <tr><td>Ctrl+C</td><td>行のコピー(未選択時)</td></tr>
        <tr><td>Ctrl+X</td><td>行の切り取り(未選択時)</td></tr>
        <tr><td>Ctrl+V</td><td>貼り付け</td></tr>
        <tr><td>Ctrl+Backspace</td><td>直前の単語を削除する</td></tr>
        <tr><td>Ctrl+Z</td><td>アンドゥ</td></tr>
        <tr><td>Ctrl+Y または Ctrl+Shift+Z</td><td>リドゥ</td></tr>
        <tr><td>Ctrl+O</td><td>ファイルを開く</td></tr>
</table>

<table>
    <caption>移動・選択</caption>
        <tr><th>ショートカットキー</th><th>意味</th></tr>
        <tr><td>Ctrl+←→</td><td>次、前の単語へジャンプする</td></tr>
        <tr><td>Alt+←→</td><td>大きくジャンプした履歴を辿る</td></tr>
        <tr><td>Ctrl+U</td><td>最後のカーソル操作に戻る</td></tr>
        <tr><td>Ctrl+home と Ctrl+end</td><td>カーソルを先頭、末尾に移動</td></tr>
        <tr><td>Ctrl+↑↓</td><td>カーソルはそのままに画面をスクロール</td></tr>
        <tr><td>F7 と Shift+F7</td><td>選択したワードをジャンプ</td></tr>
        <tr><td>Ctrl+Enter</td><td>下に新しい行を挿入して移動</td></tr>
        <tr><td>Ctrl+Shift+Enter</td><td>上に新しい行を挿入して移動</td></tr>
        <tr><td>Ctrl+G</td><td>行番号を指定して移動</td></tr>
        <tr><td>Ctrl+L</td><td>行全体を選択。繰り返し押すと次の行を選択していく</td></tr>
        <tr><td>F12 または Ctrl+クリック</td><td>選択部分の定義に移動</td></tr>
        <tr><td>Shift+Alt+←→</td><td>単語、括弧、クォートなどの囲みを選択</td></tr>
        <tr><td>Alt+クリック または Ctrl+Alt+↑↓</td><td>マルチカーソルを挿入</td></tr>
</table>

<table>
    <caption>検索・置換</caption>
        <tr><th>ショートカットキー</th><th>意味</th></tr>
        <tr><td>Ctrl+F</td><td>ファイル内検索</td></tr>
        <tr><td>F3 と Shift+F3</td><td>検索中のワードをジャンプ</td></tr>
        <tr><td>Ctrl+H</td><td>置換</td></tr>
        <tr><td>Ctrl+Shift+F</td><td>ワークスペース内で文字列検索</td></tr>
        <tr><td>Ctrl+T</td><td>ワークスペース内のシンボルを検索</td></tr>
        <tr><td>Ctrl+P または Ctrl+E</td><td>ファイルを検索して移動</td></tr>
        <tr><td>Ctrl+Shift+O</td><td>ファイル内のシンボルを検索</td></tr>
        <tr><td>Ctrl+Shift+F</td><td>ワークスペース内検索</td></tr>
        <tr><td>Ctrl+T</td><td>ワークスペースからシンボルをあいまい検索</td></tr>
</table>

<table>
    <caption>タブ</caption>
        <tr><th>ショートカットキー</th><th>意味</th></tr>
        <tr><td>Ctrl+W</td><td>タブを閉じる</td></tr>
        <tr><td>Ctrl+Tab と Ctrl+Shift+Tab</td><td>1つ前のタブ、次のタブへフォーカスを移動</td></tr>
        <tr><td>Ctrl+PageUp と Ctrl+PageDown</td><td>右のタブ、左のタブへフォーカスを移動</td></tr>
        <tr><td>Alt+1～9</td><td>左から1～9番目のタブへフォーカスを移動</td></tr>
        <tr><td>Alt+0</td><td>最も右のタブへフォーカスを移動</td></tr>
        <tr><td>Ctrl+Alt+←→</td><td>タブを左右に分割・戻す(タブグループへ)</td></tr>
        <tr><td>Ctrl+1～8</td><td>左から1～8番目のタブグループへフォーカスを移動<br>ない場合新たにタブを追加</td></tr>
        <tr><td>Ctrl+9</td><td>最も右のタブグループへフォーカスを移動</td></tr>
        <tr><td>Alt+Shift+0</td><td>タブレイアウト(上下もしくは左右)を反転</td></tr>
</table>

<table>
    <caption>サイドバー関連</caption>
        <tr><th>ショートカットキー</th><th>意味</th></tr>
        <tr><td>Ctrl+0(ゼロ)</td><td>サイドバーへフォーカスを移動</td></tr>
        <tr><td>Ctrl+B</td><td>サイドバーの表示</td></tr>
        <tr><td>Ctrl+Shift+E</td><td>エクスプローラーに移動</td></tr>
        <tr><td>Ctrl+J</td><td>パネルの表示</td></tr>
        <tr><td>Ctrl+@</td><td>ターミナルに移動</td></tr>
</table>

<table>
    <caption>エディタ機能</caption>
        <tr><th>ショートカットキー</th><th>意味</th></tr>
        <tr><td>F1 または Ctrl+Shift+P</td><td>コマンドパレットを開く</td></tr>
        <tr><td>Ctrl+Space</td><td>サジェストを表示</td></tr>
        <tr><td>Shift+Alt+F</td><td>オートフォーマット</td></tr>
        <tr><td>Ctrl+/</td><td>選択行をコメントアウト</td></tr>
        <tr><td>Ctrl+] と Ctrl+[</td><td>インデントとアンインデント</td></tr>
        <tr><td>F2</td><td>シンボルの名前変更</td></tr>
        <tr><td>Alt+↑↓</td><td>行を上下に移動する</td></tr>
        <tr><td>Shift+Alt+↑↓</td><td>行を上下にコピーする</td></tr>
        <tr><td>Ctrl+,</td><td>ユーザー設定を開く</td></tr>
        <tr><td>Ctrl+K, Ctrl+S</td><td>キーボードショートカットを開く</td></tr>
        <tr><td>Ctrl+R</td><td>最近使用したワークスペースを開く</td></tr>
        <tr><td>Ctrl+K, V</td><td>Markdownプレビューを横に表示</td></tr>
        <tr><td>Ctrl+K, Z</td><td>禅モード</td></tr>
</table>

<table>
    <caption>折りたたみ</caption>
        <tr><th>ショートカットキー</th><th>意味</th></tr>
        <tr><td>Ctrl+K, Ctrl+0</td><td>すべて折りたたむ</td></tr>
        <tr><td>Ctrl+K, Ctrl+[</td><td>再帰的に折りたたむ</td></tr>
        <tr><td>Ctrl+K, Ctrl+J</td><td>全て展開</td></tr>
        <tr><td>Ctrl+K, Ctrl+]</td><td>再帰的に展開</td></tr>
</table>

## DevContainer <a id="dev-container" data-name="DevContainer"></a>
DevContainerは、開発環境を標準化するための技術で、これは主に、VSCodeのRemote-Containers拡張機能を使用して、開発環境をコンテナ内に設定するために利用される。

- .devcontainerディレクトリのあるワークスペースを開くとdevcontainer.jsonでワークスペースを開き直すかの確認ダイアログが表示される。これを手動で行うには、コマンドパレットからDevContainers: Reopen Folder in Containerで実行する。

### devcontainer.json
devcontainer.jsonは開発コンテナの設定ファイルで、コンテナイメージ、拡張機能、コンテナ開始時に実行するコマンドなどを定義する。
<pre><code class="example">{
  "name": "Node.js Sample",
  "dockerFile": "Dockerfile",
  "extensions": [
    "dbaeumer.vscode-eslint"
  ],
  "settings": {
    "terminal.integrated.shell.linux": "/bin/bash"
  },
  "postCreateCommand": "npm install"
}</code></pre>

- devcontainer.jsonは自分で書いて作成するのが一般的だが、既定の開発環境(テンプレート)を基にして自動的に生成するためのツールも用意されている。
  - コマンドパレット(Ctrl+Shift+P)を開いてRemote-Containers: Add Development Container Configuration Files...を選択する。
  - 表示されるテンプレートのリストからプロジェクトに適したものを選択する。
  - テンプレートに基づいて生成されたdevcontainer.jsonをカスタマイズする。

- 現在の環境をエクスポートする方法としては
  - コマンドパレットでExtensions: Show Installed Extensionsを使用して、インストールされている拡張機能のリストを表示してdevcontainer.jsonに追記する。
  - プロジェクトの依存関係(package.jsonやrepuirements.txt)を参照して、必要なインストールコマンドをpostCreateCommandに追記する。
  - 使用しているベースイメージを特定し、それをdockerFileまたはimageフィールドに追記する。

- DevContainerで再現できる要素として主に次のものが挙げられる

  - 拡張機能
  <pre><code class="example">{
  "extensions": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode"
  ]
}</code></pre>

  - Dockerfile
  <pre><code class="example">{
  "dockerFile": "Dockerfile"
}</code></pre>

- docker-compose.yaml
  <pre><code class="example">{
  "dockerComposeFile": "docker-compose.yaml",
  "service": "app"
}</code></pre>

- 設定
  <pre><code class="example">{
  "settings": {
    "terminal.integrated.shell.linux": "/bin/bash"
  }
}</code></pre>

- ポスト作成コマンド
  <pre><code class="example">{
  "postCreateCommand": "npm install"
}</code></pre>

- 環境変数

  <pre><code class="example">{
  "remoteEnv": {
    "NODE_ENV": "development"
  }
}</code></pre>

- ワークスペースの設定
  <pre><code class="example">{
  "workspaceFolder": "/workspace"
}</code></pre>


- 上記の要素を含む例
  <pre><code class="example">{
  "name": "My Dev Container",
  "dockerFile": "Dockerfile",
  "dockerComposeFile": "docker-compose.yaml",
  "service": "app",
  "workspaceFolder": "/workspace",
  "extensions": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode"
  ],
  "settings": {
    "terminal.integrated.shell.linux": "/bin/bash"
  },
  "postCreateCommand": "npm install",
  "remoteEnv": {
    "NODE_ENV": "development"
  }
}</code></pre>


- docker-cmpose.yamlとdevcontainer.jsonは密接に関係しており、どちらに記述しても構築可能だが
  - 単一のコンテナのようにシンプルなプロジェクトの場合やVSCodeの拡張機能、初期設定、環境変数などはdevcontainer.json
  - 複数のコンテナを使い、より複雑な依存関係や設定が必要な場合はdocker-cmpose.yaml
に記述するといい
